<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/node_modules/reveal.js/dist/reveal.css" />
    <link rel="stylesheet" href="/node_modules/reveal.js/dist/theme/moon.css" />
    <title>Beabee, AI Callout integration</title>
    <script type="module" src="./src/main.js"></script>
    <style>
        /* CSS Variables */
        :root {
            /* Colors */
            --color-primary: #56b6c2;
            --color-primary-hover: #67c7d3;
            --color-primary-light: rgba(86, 182, 194, 0.2);
            --color-primary-light-hover: rgba(86, 182, 194, 0.3);
            --color-text: #fff;
            --color-text-muted: rgba(255, 255, 255, 0.6);
            --color-text-placeholder: rgba(255, 255, 255, 0.5);
            --color-answer-type: #98c379;
            --color-background-dark: #1e2129;
            --color-background-light: rgba(240, 240, 240, 0.05);
            --color-border: rgba(255, 255, 255, 0.1);
            --color-border-light: rgba(255, 255, 255, 0.2);
            
            /* Message colors */
            --color-user-message: rgba(100, 100, 100, 0.3);
            --color-ai-message: rgba(50, 50, 50, 0.3);
            --color-chat-input-bg: rgba(100, 100, 100, 0.3);
            
            /* Category colors */
            --color-negative-bg: rgba(255, 100, 100, 0.1);
            --color-negative-border: rgba(255, 100, 100, 0.5);
            --color-neutral-bg: rgba(200, 200, 200, 0.1);
            --color-neutral-border: rgba(200, 200, 200, 0.5);
            --color-positive-bg: rgba(100, 255, 100, 0.1);
            --color-positive-border: rgba(100, 255, 100, 0.5);
            
            /* Spacing */
            --spacing-xs: 5px;
            --spacing-sm: 8px;
            --spacing-md: 10px;
            --spacing-lg: 15px;
            --spacing-xl: 20px;
            
            /* Font sizes */
            --font-size-xs: 0.7em;
            --font-size-sm: 0.8em;
            --font-size-base: 0.85em;
            --font-size-md: 0.9em;
            --font-size-lg: 1em;
            
            /* Border radius */
            --border-radius-xs: 5px;
            --border-radius-sm: 4px;
            --border-radius-md: 6px;
            --border-radius-lg: 10px;
            --border-radius-xl: 15px;
            --border-radius-circle: 50%;
            
            /* Shadows */
            --shadow-dropdown: 0px 8px 16px 0px rgba(0,0,0,0.5);
            --shadow-container: 0 4px 15px rgba(0, 0, 0, 0.2);
            
            /* Transitions */
            --transition-default: all 0.2s;
        }

        /* Override Reveal.js default styles */
        .reveal {
            height: 100%;
        }
        
        .reveal .slides {
            height: 100%;
        }
        
        .reveal .slides section {
            padding: var(--spacing-xl);
            height: 100%;
            overflow-y: auto;
            top: 0 !important;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .reveal .slides h1, 
        .reveal .slides h2, 
        .reveal .slides h3, 
        .reveal .slides h4, 
        .reveal .slides h5, 
        .reveal .slides h6 {
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }
        
        /* Fix for Reveal.js pointer-events */
        .reveal .slides section .fragment,
        .reveal .slides section .fragment > *,
        .reveal .slides section img,
        .reveal .slides section a {
            pointer-events: auto !important;
        }
        
        /* Scrollbar styling */
        .reveal .slides section::-webkit-scrollbar {
            width: var(--spacing-sm);
        }
        
        .reveal .slides section::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: var(--border-radius-sm);
        }
        
        .reveal .slides section::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: var(--border-radius-sm);
        }
        
        .reveal .slides section::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
        
        /* Text styling */
        .description {
            margin: 0 0 var(--spacing-lg) 0;
        }
        
        .questions-title {
            margin: var(--spacing-lg) 0 var(--spacing-md) 0;
        }
        
        .questions-list {
            margin: var(--spacing-xs) 0 0 var(--spacing-lg);
            padding-left: var(--spacing-md);
        }
        
        .questions-list li {
            margin-bottom: var(--spacing-md);
        }
        
        .questions-list ul {
            margin: var(--spacing-xs) 0 var(--spacing-xs) 0;
            padding-left: var(--spacing-xl);
        }
        
        .questions-list ul li {
            margin-bottom: 3px;
            line-height: 1.3;
        }
        
        .answer-type {
            color: var(--color-answer-type);
            font-size: var(--font-size-md);
            margin-left: var(--spacing-xs);
        }
        
        /* Common component styles */
        .dropdown-item,
        .message-content,
        .toolbar-button,
        .chat-input {
            transition: var(--transition-default);
        }
        
        /* Chat styling */
        .chat-container {
            background-color: var(--color-background-light);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-container);
            margin-top: var(--spacing-md);
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .chat-messages {
            padding: var(--spacing-lg);
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .chat-messages.hidden {
            visibility: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .message {
            margin-bottom: var(--spacing-lg);
            display: flex;
            flex-direction: column;
            max-width: 85%;
        }
        
        .user-message {
            align-self: flex-end;
            align-items: flex-end;
            margin-left: auto;
        }
        
        .ai-message {
            align-self: flex-start;
            align-items: flex-start;
            margin-right: auto;
        }
        
        .message-content {
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--border-radius-xl);
            font-size: var(--font-size-md);
            line-height: 1.4;
            color: var(--color-text);
        }
        
        .user-message .message-content {
            background-color: var(--color-user-message);
            border-top-right-radius: var(--spacing-xs);
        }
        
        .ai-message .message-content {
            background-color: var(--color-ai-message);
            border-top-left-radius: var(--spacing-xs);
        }
        
        .message-time {
            font-size: var(--font-size-xs);
            margin-top: var(--spacing-xs);
            color: var(--color-text-muted);
        }
        
        .prompt-function {
            color: var(--color-primary);
            font-weight: bold;
            cursor: pointer;
            position: relative;
            display: inline-block;
        }
        
        .prompt-function:hover {
            text-decoration: underline;
        }
        
        /* Chat input styling */
        .chat-input-container {
            display: flex;
            flex-direction: column;
            padding: var(--spacing-lg);
            background-color: var(--color-user-message);
        }
        
        .chat-toolbar {
            display: flex;
            margin-bottom: 12px;
        }
        
        .toolbar-button {
            background-color: var(--color-primary-light);
            color: var(--color-primary);
            border: 1px solid rgba(86, 182, 194, 0.3);
            border-radius: var(--border-radius-md);
            padding: 6px 12px;
            font-size: var(--font-size-md);
            margin-right: var(--spacing-md);
            cursor: pointer;
            position: relative;
        }
        
        .toolbar-button:hover {
            background-color: var(--color-primary-light-hover);
        }
        
        .toolbar-button i {
            margin-right: var(--spacing-xs);
        }
        
        .chat-input-wrapper {
            display: flex;
            align-items: flex-start;
            position: relative;
        }
        
        .chat-input {
            flex: 1;
            background-color: var(--color-chat-input-bg);
            border: 1px solid var(--color-border-light);
            border-radius: var(--border-radius-xl);
            padding: 12px 18px;
            color: var(--color-text);
            font-size: var(--font-size-lg);
            outline: none;
            min-height: 60px;
            max-height: none; /* Remove max-height limitation */
            height: auto; /* Allow height to adjust to content */
            overflow-y: auto;
            font-family: inherit;
            line-height: 1.4;
            transition: height 0.2s ease; /* Add transition for smooth height changes */
        }
        
        .chat-input[contenteditable="true"] {
            cursor: text;
            white-space: pre-wrap;
            word-break: break-word;
            overflow: visible; /* Ensure overflow content is visible */
        }
        
        .chat-input[contenteditable="true"]:empty:before {
            content: attr(data-placeholder);
            color: var(--color-text-placeholder);
            pointer-events: none;
        }
        
        .chat-input[contenteditable="true"] .tag {
            color: var(--color-primary);
            font-weight: bold;
        }
        
        .chat-input::placeholder {
            color: var(--color-text-placeholder);
        }
        
        /* Style for @ tags in messages and inputs */
        .at-tag {
            color: var(--color-primary);
            font-weight: bold;
        }
        
        .send-button {
            background-color: var(--color-primary);
            color: var(--color-background-dark);
            border: none;
            border-radius: var(--border-radius-circle);
            width: 62px;
            height: 62px;
            margin-left: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-default);
            align-self: center;
        }
        
        .send-button svg {
            width: 30px;
            height: 30px;
        }
        
        .send-button:hover {
            background-color: var(--color-primary-hover);
        }
        
        /* Dropdown styling */
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--color-background-dark);
            min-width: 250px;
            box-shadow: var(--shadow-dropdown);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-sm) 0;
            z-index: 1000;
            border: 1px solid var(--color-border);
            left: 0;
            top: 100%;
        }
        
        .dropdown-content.show {
            display: block;
        }
        
        .dropdown-item {
            color: var(--color-text);
            padding: var(--spacing-sm) 12px;
            text-decoration: none;
            display: block;
            font-size: var(--font-size-base);
            cursor: pointer;
        }
        
        .dropdown-item:hover {
            background-color: var(--color-primary-light);
        }
        
        .dropdown-item.active {
            background-color: var(--color-primary-light-hover);
            font-weight: bold;
        }
        
        .dropdown-header {
            padding: var(--spacing-sm) 12px;
            color: var(--color-primary);
            font-weight: bold;
            font-size: var(--font-size-sm);
            border-bottom: 1px solid var(--color-border);
            margin-bottom: var(--spacing-xs);
        }
        
        /* Analysis styling */
        .analysis-summary {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            margin: var(--spacing-md) 0;
        }
        
        .category {
            flex: 1;
            min-width: 200px;
            padding: var(--spacing-sm);
            border-radius: var(--border-radius-xs);
        }
        
        .category h6 {
            margin: 0 0 var(--spacing-xs) 0;
            font-size: var(--font-size-md);
            text-align: left;
        }
        
        .category ul {
            margin: 0;
            padding-left: var(--spacing-lg);
            font-size: var(--font-size-base);
        }
        
        .negative {
            background-color: var(--color-negative-bg);
            border-left: 3px solid var(--color-negative-border);
        }
        
        .neutral {
            background-color: var(--color-neutral-bg);
            border-left: 3px solid var(--color-neutral-border);
        }
        
        .positive {
            background-color: var(--color-positive-bg);
            border-left: 3px solid var(--color-positive-border);
        }
        
        .conclusion {
            font-size: var(--font-size-base);
            font-style: italic;
            margin-top: var(--spacing-md);
        }
        
        .ai-message h5 {
            margin: 0 0 var(--spacing-md) 0;
            font-size: var(--font-size-lg);
            text-align: left;
        }
        
        /* Image styling */
        .image-container {
            margin: var(--spacing-md) 0;
            text-align: center;
        }
        
        .generated-image {
            max-width: 100%;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-container);
            border: 1px solid var(--color-border-light);
        }
        
        /* Chat container styling - adding frame */
        .chat-frame {
            border: 1px solid var(--color-border-light);
            border-radius: var(--border-radius-lg);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            margin: var(--spacing-xl) auto;
            max-width: 90%;
            max-height: calc(100vh - 100px); /* Limit height to viewport minus some margin */
            background-color: var(--color-background-dark);
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            background-color: rgba(30, 33, 41, 0.95);
            padding: var(--spacing-md) var(--spacing-lg);
            border-bottom: 1px solid var(--color-border-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0; /* Prevent header from shrinking */
        }
        
        .chat-title {
            color: var(--color-primary);
            font-size: var(--font-size-lg);
            font-weight: bold;
            margin: 0;
        }
        
        .chat-controls {
            display: flex;
            gap: var(--spacing-sm);
        }
        
        .chat-control-button {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: none;
        }
        
        .chat-minimize {
            background-color: #f1c40f;
        }
        
        .chat-maximize {
            background-color: #2ecc71;
        }
        
        .chat-close {
            background-color: #e74c3c;
        }
        
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            margin-top: 0;
            box-shadow: none;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: var(--spacing-lg);
            max-height: none; /* Remove fixed max-height */
            min-height: 0; /* Allow it to shrink */
        }
        
        .chat-input-container {
            display: flex;
            flex-direction: column;
            padding: var(--spacing-lg);
            background-color: var(--color-user-message);
            flex-shrink: 0; /* Prevent input area from shrinking */
        }

        /* Ensure slides take full height */
        html, body {
            height: 100%;
            overflow: hidden;
        }

        /* Adjust chat frame for better viewport fit */
        .chat-frame {
            height: calc(100vh - 120px);
            width: 90%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            flex: 1;
        }

        /* Callout preview styling */
        .callout-preview {
            background-color: var(--color-background-light);
            border-radius: var(--border-radius-md);
            padding: 0;
            margin: var(--spacing-md) 0;
            border: 1px solid var(--color-border-light);
            overflow: hidden;
        }

        .callout-header {
            background-color: var(--color-primary-light);
            padding: var(--spacing-md) var(--spacing-lg);
            border-bottom: 1px solid var(--color-border-light);
        }

        .callout-header h6 {
            margin: 0;
            color: var(--color-primary);
            font-size: var(--font-size-md);
            text-align: center;
        }

        .callout-description {
            padding: var(--spacing-md) var(--spacing-lg);
            border-bottom: 1px solid var(--color-border-light);
            background-color: rgba(255, 255, 255, 0.03);
        }

        .callout-description p {
            margin: 0;
        }

        .callout-questions-section {
            padding: var(--spacing-md) var(--spacing-lg);
        }

        .callout-questions-section p {
            margin: 0 0 var(--spacing-sm) 0;
        }

        .callout-questions-preview {
            margin: 0;
            padding-left: var(--spacing-xl);
        }

        .callout-questions-preview li {
            margin-bottom: var(--spacing-md);
        }

        .question-item {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .question-text {
            font-weight: normal;
        }

        /* Example responses styling */
        .responses-preview {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
            margin: var(--spacing-md) 0;
        }

        .response-item {
            background-color: var(--color-background-light);
            border-radius: var(--border-radius-md);
            overflow: hidden;
            border: 1px solid var(--color-border-light);
        }

        .response-header {
            background-color: rgba(86, 182, 194, 0.1);
            padding: var(--spacing-sm) var(--spacing-lg);
            border-bottom: 1px solid var(--color-border-light);
        }

        .response-type {
            font-weight: bold;
            color: var(--color-primary);
            font-size: var(--font-size-sm);
        }

        .response-content {
            padding: var(--spacing-md) var(--spacing-lg);
        }

        .response-content p {
            margin: 0;
            font-size: var(--font-size-base);
            font-style: italic;
        }

        /* Toolbar dropdown styling */
        .toolbar-dropdown {
            display: none;
            position: absolute;
            background-color: var(--color-background-dark);
            min-width: 250px;
            box-shadow: var(--shadow-dropdown);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-sm) 0;
            z-index: 1000;
            border: 1px solid var(--color-border);
            left: 0;
            bottom: 100%; /* Position above the button instead of below */
            margin-bottom: 5px; /* Add margin to bottom instead of top */
            max-height: 300px; /* Limit height */
            overflow-y: auto; /* Add scrolling if needed */
        }

        .toolbar-dropdown.show {
            display: block;
        }

        .dropdown-header {
            padding: 8px 16px;
            font-weight: bold;
            color: var(--color-primary);
            border-bottom: 1px solid var(--color-border);
            margin-bottom: 5px;
        }

        .dropdown-item {
            padding: 8px 16px;
            cursor: pointer;
        }

        .dropdown-item:hover {
            background-color: rgba(86, 182, 194, 0.1);
        }

        .dropdown-item.active {
            background-color: rgba(86, 182, 194, 0.2);
            font-weight: bold;
        }

        /* Hide AI responses by default */
        .ai-message {
            display: block;
        }

        /* Show AI responses when parent has 'show-ai-response' class */
        .show-ai-response .ai-message {
            display: block;
        }

        /* Style for the show response button */
        .show-response-button {
            display: none;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <!-- First slide: Callout creation -->
            <section>
                <div class="chat-frame">
                    <div class="chat-header">
                        <div class="chat-title">Callout-Erstellung mit KI</div>
                        <div class="chat-controls">
                            <button class="chat-control-button chat-minimize"></button>
                            <button class="chat-control-button chat-maximize"></button>
                            <button class="chat-control-button chat-close"></button>
                        </div>
                    </div>
                    <div class="chat-container">
                        <!-- Chat messages area -->
                        <div class="chat-messages">
                            <!-- User message -->
                            <div class="message user-message">
                                <div class="message-content">
                                    Erstelle bitte ein Callout zum Thema "Wie beeinflusst rechter Populismus die politische Debatte in Deutschland?"
                                </div>
                                <div class="message-time">10:30</div>
                            </div>
                            
                            <!-- AI response message with improved callout preview -->
                            <div class="message ai-message">
                                <div class="message-content">
                                    <h5>Callout-Vorschlag</h5>
                                    
                                    <div class="callout-preview">
                                        <div class="callout-header">
                                            <h6>„Wie beeinflusst rechter Populismus die politische Debatte in Deutschland?"</h6>
                                        </div>
                                        
                                        <div class="callout-description">
                                            <p><strong>Beschreibung:</strong> Rechter Populismus ist in Deutschland zunehmend präsent – in sozialen Medien, auf Demonstrationen und in der Politik. Er beeinflusst die öffentliche Meinung und das politische Klima.</p>
                                        </div>
                                        
                                        <div class="callout-questions-section">
                                            <p><strong>Fragen:</strong></p>
                                            <ol class="callout-questions-preview">
                                                <li>
                                                    <div class="question-item">
                                                        <span class="question-text">Welche Veränderungen in der politischen Debatte hast du wahrgenommen?</span>
                                                        <span class="answer-type">(Freitext)</span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="question-item">
                                                        <span class="question-text">Welche Rolle spielen soziale Medien für die Verbreitung rechter populistischer Narrative?</span>
                                                        <span class="answer-type">(Mehrfachauswahl)</span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="question-item">
                                                        <span class="question-text">Wie sollten Medien mit rechten populistischen Aussagen umgehen?</span>
                                                        <span class="answer-type">(Freitext)</span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="question-item">
                                                        <span class="question-text">Wie hat sich dein Umgang mit politischen Diskussionen verändert?</span>
                                                        <span class="answer-type">(Skala 1-10)</span>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </div>
                                    
                                    <p>Möchtest du diesen Callout in Beabee anlegen?</p>
                                </div>
                                <div class="message-time">10:31</div>
                            </div>
                            
                            <!-- User confirmation -->
                            <div class="message user-message ai-message">
                                <div class="message-content">
                                    Ja, bitte anlegen.
                                </div>
                                <div class="message-time">10:32</div>
                            </div>
                            
                            <!-- AI confirmation -->
                            <div class="message ai-message">
                                <div class="message-content">
                                    <p>✅ Der Callout wurde erfolgreich in Beabee angelegt und ist jetzt für die Community verfügbar.</p>
                                    <p>Du kannst die Antworten jederzeit über das @Callout-Tag in unseren Chats analysieren.</p>
                                </div>
                                <div class="message-time">10:32</div>
                            </div>
                        </div>
                        
                        <!-- Chat input area -->
                        <div class="chat-input-container">
                            <div class="chat-toolbar">
                                <button class="toolbar-button toolbar-button-callout" onclick="toggleToolbarDropdown(event, 'toolbar-callout-dropdown-chat-input-0')" data-input-id="chat-input-0">
                                    <i>@</i>Callout
                                </button>
                                <button class="toolbar-button toolbar-button-frage" onclick="toggleToolbarDropdown(event, 'toolbar-frage-dropdown-chat-input-0')" data-input-id="chat-input-0">
                                    <i>@</i>Frage
                                </button>
                            </div>
                            <div class="chat-input-wrapper">
                                <div class="chat-input" contenteditable="true" data-placeholder="Schreibe eine Nachricht..." id="chat-input-0"></div>
                                <button class="send-button" onclick="showConversation('chat-input-0')">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Second slide: Generate example responses -->
            <section>
                <div class="chat-frame">
                    <div class="chat-header">
                        <div class="chat-title">Beispiel-Antworten generieren</div>
                        <div class="chat-controls">
                            <button class="chat-control-button chat-minimize"></button>
                            <button class="chat-control-button chat-maximize"></button>
                            <button class="chat-control-button chat-close"></button>
                        </div>
                    </div>
                    <div class="chat-container">
                        <!-- Chat messages area -->
                        <div class="chat-messages">
                            <!-- User message -->
                            <div class="message user-message">
                                <div class="message-content">
                                    Generiere bitte einige Beispiel-Antworten für <span class="prompt-function" onclick="toggleDropdown(event, 'callout-dropdown-2')">@Callout: Wie beeinflusst rechter Populismus die politische Debatte in Deutschland?
                                        <div class="dropdown-content" id="callout-dropdown-2">
                                            <div class="dropdown-header">Verfügbare Callouts:</div>
                                            <div class="dropdown-item active">Wie beeinflusst rechter Populismus die politische Debatte in Deutschland?</div>
                                            <div class="dropdown-item">Klimawandel und persönliche Verantwortung</div>
                                            <div class="dropdown-item">Digitalisierung im Gesundheitswesen</div>
                                        </div>
                                    </span> mit unterschiedlichen Perspektiven.
                                </div>
                                <div class="message-time">10:35</div>
                            </div>
                            
                            <!-- AI response message -->
                            <div class="message ai-message">
                                <div class="message-content">
                                    <h5>Beispiel-Antworten</h5>
                                    
                                    <div class="responses-preview">
                                        <div class="response-item">
                                            <div class="response-header">
                                                <span class="response-type">Besorgt, faktenorientiert</span>
                                            </div>
                                            <div class="response-content">
                                                <p>„Mir fällt auf, dass rechte Parolen salonfähiger geworden sind. Themen wie Migration oder Gender werden zunehmend aggressiver diskutiert, oft mit falschen oder manipulierten Fakten. Besonders beunruhigend ist, dass Verschwörungstheorien immer mehr Anklang finden und Politiker:innen Angst haben, sich klar gegen rechte Hetze zu positionieren."</p>
                                            </div>
                                        </div>
                                        
                                        <div class="response-item">
                                            <div class="response-header">
                                                <span class="response-type">Relativierend, neutral</span>
                                            </div>
                                            <div class="response-content">
                                                <p>„Ich sehe durchaus eine Verschiebung im Diskurs, aber nicht nur auf der rechten Seite. Auch linke Gruppen werden lauter, und es gibt zunehmend Polarisierung auf beiden Seiten. Soziale Medien verstärken das, weil extreme Meinungen dort mehr Aufmerksamkeit bekommen."</p>
                                            </div>
                                        </div>
                                        
                                        <div class="response-item">
                                            <div class="response-header">
                                                <span class="response-type">Populistisch, verschwörungstheoretisch</span>
                                            </div>
                                            <div class="response-content">
                                                <p>„Die etablierten Medien verdrehen die Wahrheit, um rechte Stimmen zu unterdrücken. Zum Glück gibt es das Internet, wo Menschen endlich die Wahrheit sagen können! Früher gab es nur eine Meinung, heute kann jeder selbst nachdenken und erkennen, was wirklich passiert."</p>
                                            </div>
                                        </div>
                                        
                                        <div class="response-item">
                                            <div class="response-header">
                                                <span class="response-type">Persönliche Erfahrung, aktivistisch</span>
                                            </div>
                                            <div class="response-content">
                                                <p>„Ich war lange unpolitisch, aber seit ich sehe, wie rechte Narrative verbreitet werden, engagiere ich mich mehr. Ich diskutiere mit Freund:innen, gehe zu Demos und versuche, Fake News zu entlarven. Besonders wichtig ist, dass Journalist:innen klar Stellung beziehen und Fakten gegen rechte Desinformation setzen."</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <p>Möchtest du diese Beispiel-Antworten für Demonstrationszwecke in den Callout einfügen?</p>
                                </div>
                                <div class="message-time">10:36</div>
                            </div>
                            
                            <!-- User confirmation -->
                            <div class="message user-message ai-message">
                                <div class="message-content">
                                    Ja, bitte füge sie ein.
                                </div>
                                <div class="message-time">10:37</div>
                            </div>
                            
                            <!-- AI confirmation -->
                            <div class="message ai-message">
                                <div class="message-content">
                                    <p>✅ Die Beispiel-Antworten wurden erfolgreich zum Callout hinzugefügt.</p>
                                    <p>Du kannst sie jetzt für Analysen und Demonstrationen verwenden. Die Antworten decken verschiedene Perspektiven ab und eignen sich gut, um die Funktionen der KI-Analyse zu zeigen.</p>
                                </div>
                                <div class="message-time">10:37</div>
                            </div>
                        </div>
                        
                        <!-- Chat input area -->
                        <div class="chat-input-container">
                            <div class="chat-toolbar">
                                <button class="toolbar-button toolbar-button-callout" onclick="toggleToolbarDropdown(event, 'toolbar-callout-dropdown-chat-input-example')" data-input-id="chat-input-example">
                                    <i>@</i>Callout
                                </button>
                                <button class="toolbar-button toolbar-button-frage" onclick="toggleToolbarDropdown(event, 'toolbar-frage-dropdown-chat-input-example')" data-input-id="chat-input-example">
                                    <i>@</i>Frage
                                </button>
                            </div>
                            <div class="chat-input-wrapper">
                                <div class="chat-input" contenteditable="true" data-placeholder="Schreibe eine Nachricht..." id="chat-input-example"></div>
                                <button class="send-button" onclick="showConversation('chat-input-example')">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Third slide: AI analysis -->
            <section>
                <div class="chat-frame">
                    <div class="chat-header">
                        <div class="chat-title">KI-Analyse Beispiel</div>
                        <div class="chat-controls">
                            <button class="chat-control-button chat-minimize"></button>
                            <button class="chat-control-button chat-maximize"></button>
                            <button class="chat-control-button chat-close"></button>
                        </div>
                    </div>
                    <div class="chat-container">
                        <!-- Chat messages area -->
                        <div class="chat-messages">
                            <!-- User message -->
                            <div class="message user-message">
                                <div class="message-content">
                                    Welche Veränderungen in der politischen Debatte werden im <span class="prompt-function" onclick="toggleDropdown(event, 'callout-dropdown-1')">@Callout: Wie beeinflusst rechter Populismus die politische Debatte in Deutschland?
                                        <div class="dropdown-content" id="callout-dropdown-1">
                                            <div class="dropdown-header">Verfügbare Callouts:</div>
                                            <div class="dropdown-item active">Wie beeinflusst rechter Populismus die politische Debatte in Deutschland?</div>
                                            <div class="dropdown-item">Klimawandel und persönliche Verantwortung</div>
                                            <div class="dropdown-item">Digitalisierung im Gesundheitswesen</div>
                                        </div>
                                    </span> am häufigsten genannt? Schaue dir dazu alle Antworten zu <span class="prompt-function" onclick="toggleDropdown(event, 'question-dropdown-1')">@Frage: 1
                                        <div class="dropdown-content" id="question-dropdown-1">
                                            <div class="dropdown-header">Verfügbare Fragen:</div>
                                            <div class="dropdown-item active">1: Welche Veränderungen in der politischen Debatte hast du wahrgenommen?</div>
                                            <div class="dropdown-item">2: Welche Rolle spielen soziale Medien für die Verbreitung rechter populistischer Narrative?</div>
                                            <div class="dropdown-item">3: Wie sollten Medien mit rechten populistischen Aussagen umgehen?</div>
                                            <div class="dropdown-item">4: Wie hat sich dein Umgang mit politischen Diskussionen verändert?</div>
                                        </div>
                                    </span> an. Kannst du sie in positive, negative und neutrale Wahrnehmungen einteilen?
                                </div>
                                <div class="message-time">10:42</div>
                            </div>
                            
                            <!-- AI response message -->
                            <div class="message ai-message">
                                <div class="message-content">
                                    <h5>Analyse der Veränderungen in der politischen Debatte</h5>
                                    
                                    <p>Basierend auf den Antworten zur Frage 1 lassen sich folgende Wahrnehmungen identifizieren:</p>
                                    
                                    <div class="analysis-summary">
                                        <!-- Negative perceptions -->
                                        <div class="category negative">
                                            <h6>Negative Wahrnehmungen:</h6>
                                            <ul>
                                                <li>Normalisierung rechter Rhetorik (●●●●)</li>
                                                <li>Aggressivere Diskussionskultur (●●●)</li>
                                                <li>Verbreitung von Falschinformationen (●●●)</li>
                                            </ul>
                                        </div>
                                        
                                        <!-- Neutral perceptions -->
                                        <div class="category neutral">
                                            <h6>Neutrale Wahrnehmungen:</h6>
                                            <ul>
                                                <li>Allgemeine Diskursverschiebung (●●●)</li>
                                                <li>Verstärkung durch soziale Medien (●●●)</li>
                                            </ul>
                                        </div>
                                        
                                        <!-- Positive perceptions -->
                                        <div class="category positive">
                                            <h6>Positive Wahrnehmungen:</h6>
                                            <ul>
                                                <li>Verstärktes politisches Engagement (●●)</li>
                                                <li>Bewusstsein für Desinformation (●●)</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <p class="conclusion">Die Analyse zeigt, dass die Veränderungen überwiegend negativ wahrgenommen werden, insbesondere die Normalisierung rechter Rhetorik und die aggressivere Diskussionskultur.</p>
                                </div>
                                <div class="message-time">10:43</div>
                            </div>
                        </div>
                        
                        <!-- Chat input area -->
                        <div class="chat-input-container">
                            <div class="chat-toolbar">
                                <button class="toolbar-button toolbar-button-callout" onclick="toggleToolbarDropdown(event, 'toolbar-callout-dropdown-chat-input-1')" data-input-id="chat-input-1">
                                    <i>@</i>Callout
                                </button>
                                <button class="toolbar-button toolbar-button-frage" onclick="toggleToolbarDropdown(event, 'toolbar-frage-dropdown-chat-input-1')" data-input-id="chat-input-1">
                                    <i>@</i>Frage
                                </button>
                            </div>
                            <div class="chat-input-wrapper">
                                <div class="chat-input" contenteditable="true" data-placeholder="Stelle eine Frage zu den Callout-Daten..." id="chat-input-1"></div>
                                <button class="send-button" onclick="showConversation('chat-input-1')">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Fourth slide: Translation example -->
            <section>
                <div class="chat-frame">
                    <div class="chat-header">
                        <div class="chat-title">KI-Übersetzung Beispiel</div>
                        <div class="chat-controls">
                            <button class="chat-control-button chat-minimize"></button>
                            <button class="chat-control-button chat-maximize"></button>
                            <button class="chat-control-button chat-close"></button>
                        </div>
                    </div>
                    <div class="chat-container">
                        <!-- Chat messages area -->
                        <div class="chat-messages">
                            <!-- User message -->
                            <div class="message user-message">
                                <div class="message-content">
                                    Bitte übersetze alle Antworten zu <span class="prompt-function" onclick="toggleDropdown(event, 'question-dropdown-2')">@Frage: 1
                                        <div class="dropdown-content" id="question-dropdown-2">
                                            <div class="dropdown-header">Verfügbare Fragen:</div>
                                            <div class="dropdown-item active">1: Welche Veränderungen in der politischen Debatte hast du wahrgenommen?</div>
                                            <div class="dropdown-item">2: Welche Rolle spielen soziale Medien für die Verbreitung rechter populistischer Narrative?</div>
                                            <div class="dropdown-item">3: Wie sollten Medien mit rechten populistischen Aussagen umgehen?</div>
                                            <div class="dropdown-item">4: Wie hat sich dein Umgang mit politischen Diskussionen verändert?</div>
                                        </div>
                                    </span> auf englisch
                                </div>
                                <div class="message-time">11:15</div>
                            </div>
                            
                            <!-- AI response message -->
                            <div class="message ai-message">
                                <div class="message-content">
                                    <h5>Englische Übersetzung der Antworten</h5>
                                    
                                    <p>Hier sind die übersetzten Antworten zu Frage 1 "What changes have you noticed in political debate?":</p>
                                    
                                    <div class="analysis-summary">
                                        <div class="category neutral">
                                            <h6>Übersetzte Antworten (Beispiel):</h6>
                                            <ul>
                                                <li>"I've noticed that right-wing rhetoric has become increasingly normalized in public discourse. Terms and positions that would have been considered extreme a few years ago are now part of everyday political discussions."</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <p class="conclusion">Alle Antworten wurden ins Englische übersetzt, wobei die ursprüngliche Bedeutung und der Kontext erhalten geblieben sind.</p>
                                </div>
                                <div class="message-time">11:16</div>
                            </div>
                        </div>
                        
                        <!-- Chat input area -->
                        <div class="chat-input-container">
                            <div class="chat-toolbar">
                                <button class="toolbar-button toolbar-button-callout" onclick="toggleToolbarDropdown(event, 'toolbar-callout-dropdown-chat-input-2')" data-input-id="chat-input-2">
                                    <i>@</i>Callout
                                </button>
                                <button class="toolbar-button toolbar-button-frage" onclick="toggleToolbarDropdown(event, 'toolbar-frage-dropdown-chat-input-2')" data-input-id="chat-input-2">
                                    <i>@</i>Frage
                                </button>
                            </div>
                            <div class="chat-input-wrapper">
                                <div class="chat-input" contenteditable="true" data-placeholder="Stelle eine Frage zu den Callout-Daten..." id="chat-input-2"></div>
                                <button class="send-button" onclick="showConversation('chat-input-2')">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Fifth slide: Image generation example -->
            <section>
                <div class="chat-frame">
                    <div class="chat-header">
                        <div class="chat-title">KI-Bildgenerierung Beispiel</div>
                        <div class="chat-controls">
                            <button class="chat-control-button chat-minimize"></button>
                            <button class="chat-control-button chat-maximize"></button>
                            <button class="chat-control-button chat-close"></button>
                        </div>
                    </div>
                    <div class="chat-container">
                        <!-- Chat messages area -->
                        <div class="chat-messages">
                            <!-- User message -->
                            <div class="message user-message">
                                <div class="message-content">
                                    Bitte erstelle ein passendes Teaser-Bild für <span class="prompt-function" onclick="toggleDropdown(event, 'callout-dropdown-3')">@Callout: Wie beeinflusst rechter Populismus die politische Debatte in Deutschland?
                                        <div class="dropdown-content" id="callout-dropdown-3">
                                            <div class="dropdown-header">Verfügbare Callouts:</div>
                                            <div class="dropdown-item active">Wie beeinflusst rechter Populismus die politische Debatte in Deutschland?</div>
                                            <div class="dropdown-item">Klimawandel und persönliche Verantwortung</div>
                                            <div class="dropdown-item">Digitalisierung im Gesundheitswesen</div>
                                        </div>
                                    </span>
                                </div>
                                <div class="message-time">11:30</div>
                            </div>
                            
                            <!-- AI response message -->
                            <div class="message ai-message">
                                <div class="message-content">
                                    <h5>Generiertes Teaser-Bild</h5>
                                    
                                    <p>Hier ist ein Teaser-Bild für den Callout zum Thema Einfluss des rechten Populismus auf die politische Debatte in Deutschland:</p>
                                    
                                    <div class="image-container">
                                        <!-- Placeholder image - replace with actual generated image -->
                                        <img src="./src/assets/ai-generated-image-example.png" alt="Teaser image for callout about right-wing populism" class="generated-image">
                                    </div>
                                    
                                    <p>Dieses Bild stellt visuell das Thema des Callouts dar und verdeutlicht den Einfluss des rechten Populismus auf den politischen Diskurs in Deutschland.</p>
                                    
                                    <p>Möchtest du dieses Bild als Teaser-Bild für den Callout speichern?</p>
                                </div>
                                <div class="message-time">11:31</div>
                            </div>

                            <!-- User confirmation -->
                            <div class="message user-message ai-message">
                                <div class="message-content">
                                    Ja, bitte speichern.
                                </div>
                                <div class="message-time">11:32</div>
                            </div>

                            <!-- AI confirmation -->
                            <div class="message ai-message">
                                <div class="message-content">
                                    <p>✅ Das Bild wurde erfolgreich als Teaser-Bild für den Callout "Wie beeinflusst rechter Populismus die politische Debatte in Deutschland?" gespeichert.</p>
                                    <p>Es wird nun bei der Anzeige des Callouts in Beabee verwendet.</p>
                                </div>
                                <div class="message-time">11:32</div>
                            </div>
                        </div>
                        
                        <!-- Chat input area -->
                        <div class="chat-input-container">
                            <div class="chat-toolbar">
                                <button class="toolbar-button toolbar-button-callout" onclick="toggleToolbarDropdown(event, 'toolbar-callout-dropdown-chat-input-3')" data-input-id="chat-input-3">
                                    <i>@</i>Callout
                                </button>
                                <button class="toolbar-button toolbar-button-frage" onclick="toggleToolbarDropdown(event, 'toolbar-frage-dropdown-chat-input-3')" data-input-id="chat-input-3">
                                    <i>@</i>Frage
                                </button>
                            </div>
                            <div class="chat-input-wrapper">
                                <div class="chat-input" contenteditable="true" data-placeholder="Stelle eine Frage zu den Callout-Daten..." id="chat-input-3"></div>
                                <button class="send-button" onclick="showConversation('chat-input-3')">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <script>
        // Function to toggle dropdowns
        function toggleDropdown(event, dropdownId) {
            event.stopPropagation();
            document.getElementById(dropdownId).classList.toggle("show");
        }

        // Function to toggle toolbar dropdowns
        function toggleToolbarDropdown(event, dropdownId) {
            event.stopPropagation();
            // Implementation would go here
        }

        // Function to highlight @ tags in text
        function highlightTags(text) {
            if (!text) return '';
            
            // Replace @Callout: and @Frage: with highlighted spans
            return text
                .replace(/@Callout:/g, '<span class="tag">@Callout:</span>')
                .replace(/@Frage:/g, '<span class="tag">@Frage:</span>');
        }

        // Function to adjust input height based on content
        function adjustInputHeight(inputElement) {
            // Reset height to auto to get the correct scrollHeight
            inputElement.style.height = 'auto';
            
            // If the input is empty, set it to the default height
            if (!inputElement.textContent.trim()) {
                inputElement.style.height = '60px'; // Default min-height
            } else {
                // Set height to scrollHeight to fit all content
                inputElement.style.height = inputElement.scrollHeight + 'px';
            }
        }

        // Function to simulate sending a message and show the conversation
        function showConversation(inputId) {
            const inputElement = document.getElementById(inputId);
            const chatContainer = inputElement.closest('.chat-container');
            const messagesContainer = chatContainer.querySelector('.chat-messages');
            
            // Show all messages in the conversation
            messagesContainer.classList.remove('hidden');
            messagesContainer.style.visibility = 'visible';
            
            // Clear the input field
            inputElement.innerHTML = '';
            
            // Reset input field height to default
            inputElement.style.height = '60px';
            
            // Disable the input and send button to prevent multiple sends
            inputElement.setAttribute('contenteditable', 'false');
            const sendButton = inputElement.parentElement.querySelector('.send-button');
            sendButton.disabled = true;
            sendButton.style.opacity = '0.5';
            
            // Scroll to the top of the messages container instead of the bottom
            messagesContainer.scrollTop = 0;
        }

        // Initialize the page - hide conversations and populate input fields
        window.onload = function() {
            // Get all chat containers
            const chatContainers = document.querySelectorAll('.chat-container');
            
            chatContainers.forEach(container => {
                // Get the messages container and input field
                const messagesContainer = container.querySelector('.chat-messages');
                const inputField = container.querySelector('.chat-input');
                
                // Hide the messages container initially
                messagesContainer.classList.add('hidden');
                messagesContainer.style.visibility = 'hidden';
                
                // Get the first user message
                const firstUserMessage = messagesContainer.querySelector('.user-message .message-content');
                
                if (firstUserMessage && inputField) {
                    // Get the text content without dropdown HTML
                    let messageText = '';
                    
                    // Clone the message content to work with
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = firstUserMessage.innerHTML;
                    
                    // Remove dropdown content
                    const dropdowns = tempDiv.querySelectorAll('.dropdown-content');
                    dropdowns.forEach(dropdown => dropdown.remove());
                    
                    // Get the text content from the prompt-function elements
                    const promptFunctions = tempDiv.querySelectorAll('.prompt-function');
                    promptFunctions.forEach(promptFunction => {
                        // Replace the prompt-function with its text content
                        const text = promptFunction.textContent.trim();
                        const textNode = document.createTextNode(text);
                        promptFunction.parentNode.replaceChild(textNode, promptFunction);
                    });
                    
                    // Get the final text content
                    messageText = tempDiv.textContent.trim();
                    
                    // Set the input field value with highlighted @ tags
                    inputField.innerHTML = highlightTags(messageText);
                    
                    // Adjust height to fit content
                    adjustInputHeight(inputField);
                    
                    // Add input event listener to highlight @ tags while typing
                    inputField.addEventListener('input', function() {
                        const selection = window.getSelection();
                        const range = selection.getRangeAt(0);
                        const startOffset = range.startOffset;
                        
                        // Store the current content and cursor position
                        const content = this.innerHTML;
                        
                        // Highlight @ tags
                        this.innerHTML = highlightTags(this.textContent);
                        
                        // Adjust height to fit content
                        adjustInputHeight(this);
                        
                        // Restore cursor position
                        if (this.childNodes.length > 0) {
                            try {
                                const newRange = document.createRange();
                                const textNode = this.childNodes[0];
                                
                                // Set cursor position
                                newRange.setStart(textNode, Math.min(startOffset, textNode.length));
                                newRange.setEnd(textNode, Math.min(startOffset, textNode.length));
                                
                                // Apply the range
                                selection.removeAllRanges();
                                selection.addRange(newRange);
                            } catch (e) {
                                console.error('Error restoring cursor position:', e);
                            }
                        }
                    });
                }
            });

            // Override the sendMessage function from main.js
            window.sendMessage = function(inputId) {
                showConversation(inputId);
            };
        };

        // Close dropdowns when clicking outside
        window.onclick = function(event) {
            if (!event.target.matches('.prompt-function')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }
    </script>
</body>
</html> 